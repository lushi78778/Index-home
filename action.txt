个人主页落地方案（Next.js App Router + TypeScript + Tailwind CSS + shadcn/ui + MDX）

一、目标与定位
- 目标：构建快速、内容优先、长期可维护的个人主页，涵盖博客、项目集、关于、联系、订阅、搜索、标签、Notes/Bookmarks、Now、Uses。
- 侧重：极致性能、强 SEO、优秀写作体验、良好分享（OG 图）、稳定发布流程、可访问性。
- 约束：优先静态与缓存；尽量无数据库；可平滑升级到轻量 DB/CMS。

二、技术栈与原则
- 核心：Next.js App Router（>=14）、TypeScript、Tailwind CSS、shadcn/ui（按需提取）、MDX 内容。
- 内容：优选 Velite（Zod 校验 + 构建期内容集合）
- 表单：react-hook-form + zod。
- 图标/排版：lucide-react + tailwind-typography（或自定义 prose）。
- 媒体与字体：next/image + next/font（本地子集化，消除 CLS）。
- OG 图：@vercel/og（Satori）动态生成，提供静态兜底。
- 分析：Plausible 或 Umami（隐私友好）+ Vercel Analytics。
- 测试：Vitest + Testing Library；Playwright 做 E2E。
- CI/CD：GitHub Actions + Vercel；ESLint + Prettier + TypeCheck。
- 原则：RSC/Edge 优先，ISR + 静态化优先，轻依赖、低耦合。

三、信息架构（IA）与路由
- 顶部导航：Home | Blog | Projects | About | Contact | Search | Now | Uses
- 页面
  - /              首页：Hero、自我介绍、主要链接、最近文章、精选项目、社交链接
  - /blog          文章列表：分页、标签筛选、搜索入口
  - /blog/[slug]   文章详情：目录、阅读进度、代码高亮、系列/上一篇/下一篇、OG 图
  - /projects      项目列表：标签/类型筛选（开源/作品集）
  - /projects/[slug] 项目详情：截图、技术栈、链接（GitHub/Demo）、角色/成果
  - /about         关于：更完整的个人介绍、履历时间线、技能矩阵、下载简历
  - /contact       联系：表单（邮件发送 + 速率限制 + 蜜罐）与成功页
  - /subscribe     订阅：邮件订阅说明与表单（Buttondown/ConvertKit/Resend）
  - /search        搜索：客户端离线索引（MiniSearch/FlexSearch）
  - /tags/[tag]    标签聚合页：文章/项目按标签
  - /notes         短笔记/书签/片段（可选）
  - /now           当前在做什么（Now 页面）
  - /uses          设备/软件/服务清单（Uses）
  - 系统路由：/rss.xml, /sitemap.xml, /robots.txt, /manifest.webmanifest, /opengraph-image
- API 路由
  - /api/contact      联系表单（Server Action 或 Route Handler + 邮件服务）
  - /api/newsletter   订阅（对接第三方）
  - /api/revalidate   按需增量更新，密钥保护

四、内容模型与元数据（以 Velite + MDX 为例）
- Post
  - 字段：title, slug, date, updated, excerpt, cover, tags[], readingTime, draft, canonicalUrl, ogImage, series, lang
- Project
  - 字段：title, slug, description, cover, tech[], role, links{github, demo}, date, featured, tags[]
- Note/Bookmark（可选）
  - 字段：title, slug, url?, date, tags[], summary, kind(note|bookmark)
- 全局元信息：站点名、描述、作者、社交账号、默认 OG、主题色、i18n 配置
- 约束：Zod 校验；构建期生成 JSON/索引；自动 RSS/Sitemap；draft 仅在开发可见。

五、UI/UX 与设计系统（shadcn/ui）
- 基础组件：button, card, badge, avatar, dropdown-menu, sheet（移动侧边抽屉）, navigation-menu（桌面导航）
- 功能组件：command（全局搜索）、dialog（订阅/联系成功提示）、toast（表单反馈）、tooltip、tabs、pagination、progress（阅读进度）
- 布局：Header（导航/主题切换/搜索入口）、Footer（版权/社交/订阅）、Container/Grid
- 文章阅读体验：自定义 MDX 组件（图片、Callout、代码块、侧注）、目录 TOC、返回顶部、上一篇/下一篇
- 交互细节：平滑滚动、Focus 可见、键盘可达、对比度达标；浅/深色主题；移动优先
- 视觉：定制 CSS 变量（色板/半径/阴影/排版），一致的图标与微动效（尊重用户减少动画偏好）

六、搜索方案
- 构建期生成静态索引（按语言分包）：title、slug、tags、excerpt、content 摘要
- 客户端采用 MiniSearch/FlexSearch，/search 与 Command 面板共用
- 草稿/私有页面不入索引；按需懒加载索引

七、SEO/分享/结构化数据
- metadata + openGraph + twitter；canonical；分页 rel prev/next；必要时 noindex
- 动态 OG：文章/项目自动生成包含标题/封面/标签的图像（Satori）；静态兜底
- JSON-LD：Person, BlogPosting, CreativeWork, BreadcrumbList
- /sitemap.xml（动态内容）、/rss.xml（订阅）、robots.txt
- 字体：next/font 本地子集化；预连接与关键资源预加载

八、联系/订阅/评论
- 联系：/contact + Server Action；邮件服务 Resend（或 SMTP）；速率限制（Upstash Ratelimit/内存限流）+ 蜜罐 + 最小验证
- 订阅：Buttondown/ConvertKit/Resend；双重确认（double opt-in）
- 评论（可选）：Giscus（GitHub Discussions），仅文章启用，懒加载

九、国际化
- 方案：next-intl 或 next-i18next；路由前缀 /zh /en；语言切换器
- 内容：多语言 MDX 并行；未翻译回退主语言；日期/数字本地化

十、性能与可用性
- RSC/Edge 优先；ISR/SSG；图片渐进加载与尺寸占位；路由预取；边缘缓存
- 指标：LCP < 2.5s，INP < 200ms，CLS < 0.1；Lighthouse > 95
- 可访问性：语义标签、跳转到内容、焦点管理、ARIA、颜色对比≥4.5:1

十一、安全与隐私
- 安全头：CSP（允许 @vercel/og 所需资源）、Referrer-Policy、X-Content-Type-Options、Permissions-Policy
- 表单：同源 POST、CSRF 防护（或同源策略）、速率限制
- 隐私：无需第三方跟踪 Cookie（Plausible/Umami）

十二、内容生产与工作流
- 写作：MDX + 自定义组件；frontmatter Zod 校验；自动 readingTime
- 草稿：draft: true 本地可见、生产隐藏；“定时发布”基于 date 或 CI 环境变量
- 自动化：提交钩子（lint-staged/型检）；按需 revalidate

十三、测试与质量
- 单元测试：组件、MDX 渲染、工具函数
- E2E：核心路径（首页→文章→搜索→订阅→联系）
- 可访问性：axe/lighthouse CI
- 回归：路由/SEO 快照（OG/JSON-LD/sitemap/rss）

十四、部署与运维
- 部署：Vercel（Edge + ISR）；环境变量集中管理
- 备份：内容随仓库；若接入数据库则 Prisma 迁移与备份

十五、可选增强
- PWA：next-pwa（离线缓存文章/封面，Add to Home Screen）
- /resume：打印样式 + 一键导出 PDF
- Gallery/Timeline/Talks/Books：按需扩展
- 书签聚合：定时抓取来源生成 notes/bookmarks

十六、里程碑（示例）
- M1 基础（1 周）：Next.js + Tailwind + shadcn/ui + Velite；全局布局/主题；首页/Blog/Article 雏形；SEO 基础；首次部署
- M2 内容系统（1 周）：Projects/Tags/Search/OG/RSS/Sitemap；MDX 组件与 TOC；阅读体验优化
- M3 互动（0.5 周）：Contact/Subscribe + 速率限制 + 成功页；Toast 与表单校验
- M4 打磨（0.5 周）：无障碍、Lighthouse、单测/E2E、示例内容
- M5 扩展：i18n、Notes/Bookmarks、PWA、评论系统

 
 xray.top 透视实验室 品牌元素：Logo、主色、字体（中文/英文字体）自动生成
